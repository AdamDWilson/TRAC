<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Letters</title>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D1F7QEYHBR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-D1F7QEYHBR');
    </script>

    <!-- SurveyJS CSS -->
    <link href="https://unpkg.com/survey-core/survey-core.min.css" rel="stylesheet">

    <!-- Local styles -->
    <link href="css/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Directory View -->
    <div id="directoryView" class="view">
        <header class="header">
            <h1>Template Letter Generator Tool</h1>
            <p class="subtitle">Communicate with your landlord about common situations.  Use this tool to generate a letter you can edit with details about your situation and send.</p>
        </header>
        <main class="template-grid" id="templateGrid">
            <!-- Template cards populated by JS -->
        </main>
    </div>

    <!-- Survey View -->
    <div id="surveyView" class="view hidden">
        <header class="header">
            <button class="back-button" id="backButton">&larr; Back</button>
            <h1 id="surveyTitle">Template</h1>
        </header>
        <main class="survey-container">
            <p class="subtitle" id="surveyDescription"></p>
            <p class="survey-instructions">Fill out the fields below. We will generate a letter you can modify and send to your landlord.</p>
            <p class="template-doc-callout" id="templateDocCallout">
                Or <a id="templateDocLink" href="#" target="_blank" rel="noopener">download the Word template</a> instead.
            </p>
            <div id="surveyElement"></div>
            <button class="generate-button" id="generateButton">Generate Letter</button>
        </main>
    </div>

    <!-- Letter View -->
    <div id="letterView" class="view hidden">
        <header class="header">
            <h1 id="letterTitle">Generated Letter</h1>
        </header>
        <main class="letter-container">
            <p class="letter-instructions">You should deliver this letter to your landlord using an approved method, such as by mail or in person. You can copy the letter and paste it into your notes or document app to print it.</p>
            <div class="letter-actions">
                <button class="action-button" id="editButton">Edit Answers</button>
                <button class="action-button primary" id="copyButton">Copy to Clipboard</button>
                <button class="action-button primary" id="emailButton">Send as Email</button>
            </div>
            <div class="letter-content" id="letterContent">
                <!-- Rendered letter appears here -->
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <a href="https://trac.ca" target="_blank" rel="noopener">Terms of Service</a>
        <a href="https://trac.ca" target="_blank" rel="noopener">Privacy Policy</a>
    </footer>

    <!-- Toast notification -->
    <div class="toast hidden" id="toast"></div>

    <!-- CDN Scripts -->
    <script src="https://unpkg.com/survey-core/survey.core.min.js"></script>
    <script src="https://unpkg.com/survey-js-ui/survey-js-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/nunjucks@3.2.4/browser/nunjucks.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Local Scripts -->
    <script src="templates/index.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
